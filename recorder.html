<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>à¸šà¸±à¸™à¸—à¸¶à¸à¹€à¸ªà¸µà¸¢à¸‡à¹à¸¥à¸°à¹€à¸¥à¸·à¸­à¸à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œ</title>
  <style>
    body { font-family: 'Sarabun', sans-serif; padding: 20px; }
    button { margin: 10px; padding: 10px 20px; }
    #features { margin-top: 20px; display: none; }
    audio { margin-top: 15px; display: block; width: 100%; }
  </style>
</head>
<body>

<h1>ğŸ™ï¸ à¸šà¸±à¸™à¸—à¸¶à¸à¹€à¸ªà¸µà¸¢à¸‡</h1>

<button id="startBtn">à¹€à¸£à¸´à¹ˆà¸¡à¸šà¸±à¸™à¸—à¸¶à¸</button>
<button id="stopBtn" disabled>à¸«à¸¢à¸¸à¸”</button>
<p id="status">à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¹€à¸£à¸´à¹ˆà¸¡à¸šà¸±à¸™à¸—à¸¶à¸</p>
<audio id="audioPlayback" controls></audio>

<div id="features">
  <h2>ğŸ”§ à¹€à¸¥à¸·à¸­à¸à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œ</h2>
  <button onclick="doFeature('translate')">ğŸŒ à¹à¸›à¸¥à¸ à¸²à¸©à¸²</button>
  <button onclick="doFeature('navigate')">ğŸ“ à¸™à¸³à¸—à¸²à¸‡</button>
  <button onclick="doFeature('speak')">ğŸ—£ï¸ à¸­à¹ˆà¸²à¸™à¸­à¸­à¸à¹€à¸ªà¸µà¸¢à¸‡</button>
  <button onclick="doFeature('text')">ğŸ“„ à¹à¸›à¸¥à¸‡à¹€à¸›à¹‡à¸™à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡</button>
</div>

<script>
  let mediaRecorder;
  let audioChunks = [];

  const startBtn = document.getElementById('startBtn');
  const stopBtn = document.getElementById('stopBtn');
  const statusText = document.getElementById('status');
  const audioPlayback = document.getElementById('audioPlayback');
  const featuresDiv = document.getElementById('features');

  startBtn.onclick = async () => {
    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
    mediaRecorder = new MediaRecorder(stream);
    mediaRecorder.start();
    statusText.textContent = "ğŸ™ï¸ à¸à¸³à¸¥à¸±à¸‡à¸šà¸±à¸™à¸—à¸¶à¸...";
    startBtn.disabled = true;
    stopBtn.disabled = false;
    audioChunks = [];

    mediaRecorder.ondataavailable = e => audioChunks.push(e.data);
    mediaRecorder.onstop = () => {
      const audioBlob = new Blob(audioChunks, { type: 'audio/webm' });
      const audioUrl = URL.createObjectURL(audioBlob);
      audioPlayback.src = audioUrl;
      statusText.textContent = "âœ… à¸šà¸±à¸™à¸—à¸¶à¸à¹€à¸ªà¸£à¹‡à¸ˆà¹à¸¥à¹‰à¸§";
      featuresDiv.style.display = "block";
    };
  };

  stopBtn.onclick = () => {
    mediaRecorder.stop();
    startBtn.disabled = false;
    stopBtn.disabled = true;
  };

  function doFeature(feature) {
    switch (feature) {
      case 'translate':
        alert("ğŸ“Œ à¸à¸³à¸¥à¸±à¸‡à¹à¸›à¸¥à¹€à¸ªà¸µà¸¢à¸‡ (à¸£à¸°à¸šà¸šà¸ˆà¸£à¸´à¸‡à¹€à¸Šà¸·à¹ˆà¸­à¸¡ API à¹„à¸”à¹‰)");
        break;
      case 'navigate':
        alert("ğŸ“Œ à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œà¸™à¸³à¸—à¸²à¸‡ (à¸­à¸²à¸ˆà¹€à¸Šà¸·à¹ˆà¸­à¸¡ Google Maps)");
        break;
      case 'speak':
        alert("ğŸ“Œ à¸£à¸°à¸šà¸šà¸ˆà¸°à¸­à¹ˆà¸²à¸™à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸­à¸­à¸à¹€à¸ªà¸µà¸¢à¸‡");
        break;
      case 'text':
        alert("ğŸ“Œ à¸£à¸°à¸šà¸šà¸ˆà¸°à¹à¸›à¸¥à¸‡à¹€à¸ªà¸µà¸¢à¸‡à¹€à¸›à¹‡à¸™à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡");
        break;
    }
  }
</script>

</body>
</html>
